<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LSPD - Bureautique</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      background-color: #0d1117;
      color: white;
    }

    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background-color: #161b22;
      border-radius: 10px;
    }

    h1, h2 {
      text-align: center;
      color: #58a6ff;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    input, select, textarea {
      padding: 10px;
      border: none;
      border-radius: 5px;
      background-color: #0d1117;
      border: 1px solid #30363d;
      color: white;
    }

    button {
      padding: 10px;
      background-color: #238636;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: white;
    }

    button:hover {
      background-color: #2ea043;
    }

    .hidden {
      display: none;
    }

    .profile-card {
      background-color: #21262d;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
    }

    .btn-danger {
      background-color: #da3633;
    }

    .btn-danger:hover {
      background-color: #e5534b;
    }

    nav {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    nav button {
      flex: 1;
      margin: 0 5px;
    }

    img.preview {
      max-width: 100px;
      margin-top: 10px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <!-- Cr√©ation de compte -->
      <div id="registerView">
        <h2>Cr√©er un compte LSPD</h2>
        <form id="registerForm">
          <input type="text" id="matricule" placeholder="Matricule" required />
          <input type="text" id="nom" placeholder="Nom" required />
          <input type="text" id="prenom" placeholder="Pr√©nom" required />
          <select id="grade" required>
            <option value="">S√©lectionner un grade</option>
            <option value="LSPD">LSPD</option>
            <option value="Haut grade">Haut grade</option>
            <option value="Staff">Staff</option>
            <option value="Justice">Justice</option>
          </select>
          <button type="submit">Cr√©er le compte</button>
        </form>
        <p>D√©j√† un compte ? <a onclick="toggleView('login')">Connexion</a></p>
      </div>

      <!-- Connexion -->
      <div id="loginView" class="hidden">
        <h2>Connexion LSPD</h2>
        <form id="loginForm">
          <input type="text" id="matriculeLogin" placeholder="Matricule" required />
          <input type="text" id="nomLogin" placeholder="Nom" required />
          <input type="text" id="prenomLogin" placeholder="Pr√©nom" required />
          <select id="gradeLogin" required>
            <option value="">S√©lectionner un grade</option>
            <option value="LSPD">LSPD</option>
            <option value="Haut grade">Haut grade</option>
            <option value="Staff">Staff</option>
            <option value="Justice">Justice</option>
          </select>
          <button type="submit">Se connecter</button>
        </form>
        <p>Pas encore de compte ? <a onclick="toggleView('register')">Cr√©er un compte</a></p>
      </div>
    </div>
  </div>

  <script>
    function toggleView(view) {
      document.getElementById("registerView").classList.toggle("hidden", view !== "register");
      document.getElementById("loginView").classList.toggle("hidden", view !== "login");
    }

    // Cr√©ation de compte
    document.getElementById("registerForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const user = {
        matricule: document.getElementById("matricule").value,
        nom: document.getElementById("nom").value,
        prenom: document.getElementById("prenom").value,
        grade: document.getElementById("grade").value,
      };
      localStorage.setItem("lspdUser", JSON.stringify(user));
      alert("Compte cr√©√© !");
      toggleView('login');
    });

    // Connexion
    document.getElementById("loginForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const savedUser = JSON.parse(localStorage.getItem("lspdUser"));
      const matricule = document.getElementById("matriculeLogin").value;
      const nom = document.getElementById("nomLogin").value;
      const prenom = document.getElementById("prenomLogin").value;
      const grade = document.getElementById("gradeLogin").value;

      if (
        savedUser &&
        savedUser.matricule === matricule &&
        savedUser.nom === nom &&
        savedUser.prenom === prenom &&
        savedUser.grade === grade
      ) {
        alert("Connexion r√©ussie !");
        // Redirection vers tableau de bord possible ici
      } else {
        alert("Informations incorrectes !");
      }
    });
  </script>
</body>
</html>


  <div class="container hidden" id="dashboard">
    <h1>Bureautique LSPD</h1>
    <p id="welcomeText"></p>
    <nav>
      <button onclick="showSection('createSuspect')">Cr√©er un profil suspect</button>
      <button onclick="showSection('readSuspects')">Voir les profils suspects</button>
    </nav>

    <!-- Cr√©ation de profil suspect -->
    <div id="createSuspect" class="hidden">
      <h2>Cr√©er un suspect / Modifier </h2>
      <form id="suspectForm">
        <input type="text" id="suspectNom" placeholder="Nom" />
        <input type="text" id="suspectPrenom" placeholder="Pr√©nom" />
        <input type="text" id="suspectTel" placeholder="T√©l√©phone" />
        <input type="text" id="suspectAdresse" placeholder="Adresse" />
        <input type="date" id="suspectNaissance" />
        <input type="file" id="suspectImage" accept="image/*" />
        <img id="previewImage" class="preview" />
        <button type="submit">Enregistrer le suspect</button>
      </form>
    </div>

    <!-- Lecture des profils -->
    <div id="readSuspects" class="hidden">
      <h2>Profils suspects</h2>
      <div id="suspectList"></div>
    </div>
  </div>

  <script>
    let currentGrade = "";

    function showSection(id) {
      document.getElementById("createSuspect").classList.add("hidden");
      document.getElementById("readSuspects").classList.add("hidden");
      document.getElementById(id).classList.remove("hidden");
      if (id === "readSuspects") renderSuspects();
    }

    // Pr√©visualisation image
    document.getElementById("suspectImage").addEventListener("change", function () {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          document.getElementById("previewImage").src = reader.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // Connexion
    document.getElementById("loginForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const grade = document.getElementById("gradeLogin").value;
      currentGrade = grade;

      document.getElementById("loginPage").classList.add("hidden");
      document.getElementById("dashboard").classList.remove("hidden");
      document.getElementById("welcomeText").innerText = `Grade : ${grade}`;
    });

    // Sauvegarde suspect
    document.getElementById("suspectForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const suspects = JSON.parse(localStorage.getItem("suspects") || "[]");

      const reader = new FileReader();
      const file = document.getElementById("suspectImage").files[0];

      const suspectData = {
        id: Date.now(),
        nom: document.getElementById("suspectNom").value,
        prenom: document.getElementById("suspectPrenom").value,
        tel: document.getElementById("suspectTel").value,
        adresse: document.getElementById("suspectAdresse").value,
        naissance: document.getElementById("suspectNaissance").value,
        image: ""
      };

      if (file) {
        reader.onload = function () {
          suspectData.image = reader.result;
          suspects.push(suspectData);
          localStorage.setItem("suspects", JSON.stringify(suspects));
          alert("Suspect enregistr√© !");
          document.getElementById("suspectForm").reset();
          document.getElementById("previewImage").src = "";
        };
        reader.readAsDataURL(file);
      } else {
        suspects.push(suspectData);
        localStorage.setItem("suspects", JSON.stringify(suspects));
        alert("Suspect enregistr√© !");
        document.getElementById("suspectForm").reset();
      }
    });

    function renderSuspects() {
      const suspects = JSON.parse(localStorage.getItem("suspects") || "[]");
      const list = document.getElementById("suspectList");
      list.innerHTML = "";

      if (suspects.length === 0) {
        list.innerHTML = "<p>Aucun profil enregistr√©.</p>";
        return;
      }

      suspects.forEach(s => {
        const div = document.createElement("div");
        div.className = "profile-card";
        div.innerHTML = `
          <strong>${s.nom || "?"} ${s.prenom || "?"}</strong><br>
          üìû ${s.tel || "N/A"}<br>
          üìç ${s.adresse || "N/A"}<br>
          üéÇ ${s.naissance || "N/A"}<br>
          ${s.image ? `<img src="${s.image}" class="preview" />` : ""}
          <br><button onclick="editSuspect(${s.id})">Modifier</button>
          ${["Haut grade", "Justice", "Staff"].includes(currentGrade) ? `<button class="btn-danger" onclick="deleteSuspect(${s.id})">Supprimer</button>` : ""}
        `;
        list.appendChild(div);
      });
    }

    function deleteSuspect(id) {
      let suspects = JSON.parse(localStorage.getItem("suspects") || "[]");
      suspects = suspects.filter(s => s.id !== id);
      localStorage.setItem("suspects", JSON.stringify(suspects));
      renderSuspects();
    }

    function editSuspect(id) {
      const suspects = JSON.parse(localStorage.getItem("suspects") || "[]");
      const suspect = suspects.find(s => s.id === id);
      if (!suspect) return;

      document.getElementById("suspectNom").value = suspect.nom;
      document.getElementById("suspectPrenom").value = suspect.prenom;
      document.getElementById("suspectTel").value = suspect.tel;
      document.getElementById("suspectAdresse").value = suspect.adresse;
      document.getElementById("suspectNaissance").value = suspect.naissance;
      document.getElementById("previewImage").src = suspect.image || "";

      showSection('createSuspect');
      deleteSuspect(id); // On supprime et laisse l'utilisateur enregistrer √† nouveau
    }
  </script>
</body>
</html>
